<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Bible Tracker - Spacious Design</title>
    <style>
        :root {
            --hex-w: 40px; /* Немного уменьшил для большего расстояния по бокам */
            --hex-h: calc(var(--hex-w) * 1.1547);
            --hex-gap: 3px; /* Увеличил зазор между сотами */
            --hex-active: #ffcc00;
        }

        body {
            background-color: #f2f2f7;
            margin: 0;
            padding: 0;
            font-family: -apple-system, system-ui, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }

        header {
            width: 100%;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            position: sticky;
            top: 0; z-index: 1000;
            padding: 15px 0;
            border-bottom: 0.5px solid #c6c6c8;
            text-align: center;
        }

        /* Контейнер с увеличенными отступами по бокам */
        .app-card {
            background: #ffffff;
            margin: 25px 15px; /* Увеличил внешние отступы */
            padding: 40px 25px; /* Увеличил внутренние расстояния от сот до краев */
            border-radius: 28px;
            box-shadow: 0 4px 25px rgba(0,0,0,0.06);
            display: flex;
            flex-direction: column;
            align-items: center;
            /* Рассчитываем ширину так, чтобы соты были по центру с запасом */
            max-width: 90%; 
        }

        .grid {
            line-height: 0;
            display: inline-block;
            /* Компенсация сдвига для идеальной центровки всей группы */
            margin-right: calc(var(--hex-w) / 4); 
        }

        .row {
            white-space: nowrap;
            margin-top: calc(var(--hex-h) * -0.26);
            display: block;
        }

        .row:first-child { margin-top: 0; }

        /* Сдвиг без вылета за края */
        .row:nth-child(even) {
            margin-left: calc(var(--hex-w) / 2 + var(--hex-gap));
        }

        .hexagon {
            width: var(--hex-w);
            height: var(--hex-h);
            display: inline-block;
            margin: var(--hex-gap);
            position: relative;
            background: #e5e5ea; 
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            transition: transform 0.1s cubic-bezier(0.1, 0.7, 1.0, 0.1);
        }

        .hexagon:active { transform: scale(0.8); }

        .hexagon-inner {
            position: absolute;
            top: 1.5px; left: 1.5px; right: 1.5px; bottom: 1.5px;
            background: white;
            clip-path: inherit;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 700;
            color: #3a3a3c;
            transition: background 0.3s ease;
        }

        .checked .hexagon-inner {
            background: linear-gradient(145deg, #ffcc00, #ff9500);
            color: white;
        }

        .switch-container {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            margin-top: 8px; font-size: 11px; font-weight: 600; color: #8e8e93;
            text-transform: uppercase; letter-spacing: 0.5px;
        }
        .switch { position: relative; width: 42px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #d1d1d6; border-radius: 20px; transition: 0.3s; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 2px; bottom: 2px; background: white; border-radius: 50%; transition: 0.3s; }
        input:checked + .slider { background: #ffcc00; }
        input:checked + .slider:before { transform: translateX(18px); }
    </style>
</head>
<body>

<header>
    <div style="font-weight:800; font-size:20px; color: #1c1c1e;">бытие</div>
    <div class="switch-container">
        <span>по порядку</span>
        <label class="switch">
            <input type="checkbox" id="mix-toggle">
            <span class="slider"></span>
        </label>
        <span>микс</span>
    </div>
</header>

<div class="app-card">
    <div class="grid" id="grid"></div>
</div>

<script>
    const grid = document.getElementById('grid');
    const toggle = document.getElementById('mix-toggle');
    const chaptersCount = 50;
    const perRow = 7;
    const key = 'bible_genesis_v11_spacious';

    function render() {
        grid.innerHTML = '';
        let nums = Array.from({length: chaptersCount}, (_, i) => i + 1);
        if(toggle.checked) nums.sort(() => Math.random() - 0.5);
        
        const saved = JSON.parse(localStorage.getItem(key)) || [];

        for (let i = 0; i < nums.length; i += perRow) {
            const row = document.createElement('div');
            row.className = 'row';
            nums.slice(i, i + perRow).forEach(n => {
                const hex = document.createElement('div');
                hex.className = 'hexagon' + (saved.includes(n) ? ' checked' : '');
                hex.innerHTML = `<div class="hexagon-inner">${n}</div>`;
                hex.onclick = () => {
                    hex.classList.toggle('checked');
                    let p = JSON.parse(localStorage.getItem(key)) || [];
                    p = hex.classList.contains('checked') ? [...p, n] : p.filter(x => x !== n);
                    localStorage.setItem(key, JSON.stringify(p));
                };
                row.appendChild(hex);
            });
            grid.appendChild(row);
        }
    }

    toggle.onchange = render;
    render();
</script>

</body>
</html>